<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  
  <title>Emacs 使用再记（4）- EMACS EVERYWHERE! | Foxhole</title>
  <meta name="author" content="SouthFox">
  
  <meta name="description" content="离开 Emacs ，怎么可能？">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta property="og:title" content="2024/12/emacs-everywhere/">
    <meta property="og:site_name" content="Foxhole">
  
  <meta name=fediverse:creator content="SouthFox@foxsay.southfox.me">
  
    <meta property="og:image" content="https://blog.southfox.me/favicon.png">
  
  

  
  
    <link href="../../.././favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="../../.././css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="../../.././css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="../../.././css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="../../.././css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="../../.././css/font-awesome.css" media="screen" type="text/css">
  <script src="../../.././js/jquery-2.0.3.min.js"> async</script>
<meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="rss2.xml" title="Foxhole" type="application/rss+xml">
</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="../../.././">Foxhole</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="../../.././archives" title="All the articles.">
			  <i class=""></i>归档
			</a>
		  </li>
		  
		  <li>
			<a href="../../.././categories" title="All the categories.">
			  <i class=""></i>分类
			</a>
		  </li>
		  
		  <li>
			<a href="../../.././tags" title="All the tags.">
			  <i class=""></i>标签
			</a>
		  </li>
		  
		  <li>
			<a href="../../.././rss2.xml" title="Subscribe me.">
			  <i class=""></i>RSS
			</a>
		  </li>
		  
		  <li>
			<a href="../../.././friends" title="朋友们">
			  <i class=""></i>友链
			</a>
		  </li>
		  
		  <li>
			<a href="../../.././foxsay" title="狐狸怎么叫？">
			  <i class=""></i>狐说
			</a>
		  </li>
		  
		  <li>
			<a href="../../.././travellings" title="一群狼走得更远">
			  <i class="fas fa-subway"></i>开往
			</a>
		  </li>
		  
		  <li>
			<a href="../../.././go" title="十年之约">
			  <i class="fas fa-bahai"></i>虫洞
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header">
			<h1> Emacs 使用再记（4）- EMACS EVERYWHERE!</h1>
		</div>
	



<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	

	<!-- content -->
	<div class="mypage">		
	  		

	  <p>离开 Emacs ，怎么可能？</p>
<span id="more"></span>

<p>在移动端使用 emacs 是有能见到的好处的，例如随时随地开记一点笔记或者处理一些脚本，而且随着原生安卓移植版的推出，在安卓 emacs 里查看多媒体也成了可能的事……不过这里面需要折腾的量嘛……</p>
<h2 id="Syncthing"><a href="#Syncthing" class="headerlink" title="Syncthing"></a>Syncthing</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>在折腾了众多方案后，最终还是选择了 Syncthing 来作为同步方案，因为它是以文件的形式存在本地，同步只是修改，如果走一众网络协议在 org-roam 这种需要不断监听文件修改的应用场景会让延迟变得难以忍受。</p>
<p>Arch 系统的话简单使用 <code>sudo pacman -S syncthing</code> 即可，如果是用 Debian 系的话，首先要换成官方源确保安装最新版本：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-s</span> https://syncthing.net/release-key.txt <span class="token operator">|</span> <span class="token function">sudo</span> apt-key <span class="token function">add</span> -
<span class="token builtin class-name">echo</span> <span class="token string">"deb https://apt.syncthing.net/ syncthing release"</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/syncthing.list
<span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> syncthing<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>安装完成后使用</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> syncthing@<span class="token environment constant">$USER</span>
<span class="token function">sudo</span> systemctl start syncthing@<span class="token environment constant">$USER</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>命令将软件设成开机启动。</p>
<p>安卓端 Syncthing 同步使用 Syncthing-fork ，因为里面由针对移动端的优化，如果使用 Syncthing 安卓端很容易收到系统的后台管理限制导致软件冻住然后半天无法进行同步，而 Syncthing-fork 有始终同步和间隔同步的设置能应付后台管理限制严格的系统。</p>
<p><a target="_blank" rel="noopener" href="https://f-droid.org/packages/com.github.catfriend1.syncthingandroid/">GitHub</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Catfriend1/syncthing-android-fdroid">F-droid</a></p>
<h3 id="概览"><a href="#概览" class="headerlink" title="概览"></a>概览</h3><p>Syncthing 会将联结起来的节点称为集群，然后通过「文件夹 ID」来标识集群内需要同步的内容，所以要保证集群内的共享「文件夹 ID」不能冲突，这点设计上就跟 Resilio Sync 这种面向公网的软件不太一样。</p>
<h3 id="WEBUI-配置"><a href="#WEBUI-配置" class="headerlink" title="WEBUI 配置"></a>WEBUI 配置</h3><p>启动后在本机前往 <code>http://127.0.0.1:8384</code> 地址即可使用内置的 Web 界面进行配置，添加和配置共享文件夹都可以这么做，如果是在服务器上可以使用 SSH 端口转发将服务器的 127.0.0.1:8384 转发到本地进行操作。</p>
<h3 id="命令行配置"><a href="#命令行配置" class="headerlink" title="命令行配置"></a>命令行配置</h3><p>以两台设备：设备A 设备B 为例子：</p>
<p>使用 <code>syncthing cli show system | grep .myID</code> 命令即可显示本服务上的 ID 。然后使用 <code>syncthing cli config devices add --device-id $设备B ID</code> 即可将相关设备添加到名单中。之后使用（假设需要共享的「文件夹 ID」为 org）：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ~/Sync/org
syncthing cli config folders <span class="token function">add</span> <span class="token parameter variable">--id</span> org <span class="token parameter variable">--label</span> org <span class="token parameter variable">--path</span> ~/Sync/org<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>即可添加一个共享文件夹，其中 id 在各个链接的设备是唯一标识的， label 为说明性内容可随便定义， path 为共享文件夹放置的路径（务必要指定否则默认指定成配置成 home 目录会造成不必要的麻烦）。</p>
<p>设定好后，可使用：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">syncthing cli config folders org devices <span class="token function">add</span> --device-id $添加设备ID<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>命令将设备添加到共享设备中，设备 B 做一次相同的操作但将设备 ID 换成对方就行了：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">syncthing cli config devices <span class="token function">add</span> --device-id $设备A ID
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ~/Sync/org
syncthing cli config folders <span class="token function">add</span> <span class="token parameter variable">--id</span> org <span class="token parameter variable">--label</span> org <span class="token parameter variable">--path</span> ~/Sync/org
syncthing cli config folders org devices <span class="token function">add</span> --device-id $设备A ID<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="移动端-Org-mode"><a href="#移动端-Org-mode" class="headerlink" title="移动端 Org-mode"></a>移动端 Org-mode</h2><p>Org-mode 很强大，但很多功能都得依托于 Emacs 环境，而且对于 GTD 功能上的提醒和展示功能，安卓 Emacs 也很难做到，索性 Org-mode 只是些纯文件，所以可以通过安卓上 Orgzly Revived 这个 App 来解析文件并调用安卓系统来补足这方面的不足（闹钟、通知提醒；桌面小组件展示待办）。</p>
<p><a target="_blank" rel="noopener" href="https://github.com/orgzly-revived/orgzly-android-revived">GitHub</a></p>
<p><a target="_blank" rel="noopener" href="https://f-droid.org/packages/com.orgzlyrevived/">F-droid</a></p>
<p>在设置了 Syncthing 同步后，移动端就有同步过后的 Org 文件了，然后可在「设置-&gt;同步-&gt;存储库-&gt;右上角加号-&gt;目录」添加一个本地目录（会解析目录下所有的 org 文件所以建议将相关 GTD 文件放到单独的目录里）。然后在「设置-&gt;同步设置」将相关的自动同步开上，因为 Orgzly Revived 设计上也是将数据记录在自己应用的数据库里，不会立马回刷到文件中。</p>
<h2 id="Emacs"><a href="#Emacs" class="headerlink" title="Emacs"></a>Emacs</h2><p>Emacs 原生安卓版项目主页在（建议读读主页的描述文件的 FAQ）：</p>
<p><a target="_blank" rel="noopener" href="https://sourceforge.net/projects/android-ports-for-gnu-emacs/files/">Android ports for GNU Emacs - Browse Files at SourceForge.net</a></p>
<p>上，里面包含了具有相同签名的 Termux 安装包（在项目主页 Termux 目录下），这样 Emacs 即可访问相同 ID Termux 里 pkg install 安装的应用，不过因为签名问题需要卸载掉原先的 Termux，所以之前有安装过 Termux 的话需要做好数据备份然后卸载装上项目里的 Termux 。</p>
<p>安装 emacs 好后就可启动了，当然再次之前需要给 emacs 赋予访问全部文件的权限，在较高版本安卓，文件权限可以分目录级粒度赋予，所以需要「全部文件访问权限」。如果能在系统的设置菜单找到相应配置就直接赋予 emacs, 如果不行，可以打开 emacs 后在主页菜单栏 Edit-&gt;Execute Command 里（相当于 M-x ，是的，在安卓上还是得尽量依赖菜单栏）然后输入 <code>android-request-storage-access</code> 申请获取「全部文件访问权限」。</p>
<p>然后接下来就是激动的配置时间了，可以在 termux 里安装一个 vim 然后编辑 <code>/data/data/org.gnu.emacs/files/.emacs.d/init.el</code>（这何尝不是一种……）或者在 emacs 里直接打开编辑 <code>.emacs/.emacs.d/</code> 里的文件。</p>
<p>我现在的配置文件如下：</p>
<pre class="line-numbers language-lisp" data-language="lisp"><code class="language-lisp"><span class="token comment">;; BASIC SETUP:</span>
<span class="token comment">;; package setup - bootstrap the package system</span>
<span class="token punctuation">(</span><span class="token keyword">require</span> <span class="token quoted-symbol variable symbol">'package</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">setq</span> package-enable-at-startup <span class="token boolean">nil</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">setq</span> gnutls-algorithm-priority <span class="token string">"NORMAL:-VERS-TLS1.3"</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">setq</span> package-archives
        <span class="token punctuation">'(</span><span class="token punctuation">(</span><span class="token string">"<span class="token argument">GNU</span> ELPA"</span>     <span class="token punctuation">.</span> <span class="token string">"https://elpa.gnu.org/packages/"</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token string">"<span class="token argument">MELPA</span> Stable"</span> <span class="token punctuation">.</span> <span class="token string">"https://stable.melpa.org/packages/"</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token string">"MELPA"</span>        <span class="token punctuation">.</span> <span class="token string">"https://melpa.org/packages/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        package-archive-priorities
        <span class="token punctuation">'(</span><span class="token punctuation">(</span><span class="token string">"MELPA"</span>        <span class="token punctuation">.</span> <span class="token number">15</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token string">"<span class="token argument">MELPA</span> Stable"</span> <span class="token punctuation">.</span> <span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token string">"<span class="token argument">GNU</span> ELPA"</span>     <span class="token punctuation">.</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token car">package-initialize</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">setq</span> use-package-always-ensure <span class="token boolean">t</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">unless</span> <span class="token punctuation">(</span><span class="token car">package-installed-p</span> <span class="token quoted-symbol variable symbol">'use-package</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token car">package-refresh-contents</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token car">package-install</span> <span class="token quoted-symbol variable symbol">'use-package</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token car">eval-when-compile</span>
    <span class="token punctuation">(</span><span class="token keyword">require</span> <span class="token quoted-symbol variable symbol">'use-package</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token keyword">require</span> <span class="token quoted-symbol variable symbol">'org-capture</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">;; custom</span>
<span class="token comment">;; 防止主题信任等变量弄乱 init.el 文件</span>
<span class="token punctuation">(</span><span class="token keyword">setq</span> custom-file <span class="token punctuation">(</span><span class="token keyword">concat</span> user-emacs-directory <span class="token string">"custom.el"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">when</span> <span class="token punctuation">(</span><span class="token car">file-exists-p</span> custom-file<span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token car">load</span> custom-file<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">;; ORG</span>
<span class="token punctuation">(</span><span class="token keyword">use-package</span> org
    <span class="token lisp-property property">:ensure</span> <span class="token boolean">t</span>
    <span class="token lisp-property property">:init</span>
    <span class="token punctuation">(</span><span class="token keyword">setq</span> org-src-fontify-natively <span class="token boolean">t</span><span class="token punctuation">)</span>
    <span class="token lisp-property property">:config</span>
    <span class="token punctuation">(</span><span class="token keyword">setq</span> word-wrap-by-category <span class="token boolean">t</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token car">add-hook</span> <span class="token quoted-symbol variable symbol">'org-mode-hook</span> <span class="token quoted-symbol variable symbol">'visual-line-mode</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token keyword">setq</span> org-ellipsis <span class="token string">"⇣"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">use-package</span> org-roam
    <span class="token lisp-property property">:ensure</span> <span class="token boolean">t</span>
    <span class="token lisp-property property">:custom</span>
    <span class="token punctuation">(</span><span class="token car">org-roam-directory</span> <span class="token punctuation">(</span><span class="token car">file-truename</span> <span class="token string">"/storage/emulated/0/Sync/org/Note/org-roam"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token lisp-property property">:bind</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">"C-c n r r"</span> <span class="token punctuation">.</span> org-roam-buffer-toggle<span class="token punctuation">)</span>
            <span class="token punctuation">(</span><span class="token string">"C-c n r f"</span> <span class="token punctuation">.</span> org-roam-node-find<span class="token punctuation">)</span>
            <span class="token punctuation">(</span><span class="token string">"C-c n r i"</span> <span class="token punctuation">.</span> org-roam-node-insert<span class="token punctuation">)</span>
            <span class="token punctuation">(</span><span class="token string">"C-c n r n"</span> <span class="token punctuation">.</span> org-roam-capture<span class="token punctuation">)</span>
            <span class="token comment">;; Dailies</span>
            <span class="token punctuation">(</span><span class="token string">"C-c n r d t"</span> <span class="token punctuation">.</span> org-roam-dailies-goto-today<span class="token punctuation">)</span>
            <span class="token punctuation">(</span><span class="token string">"C-c n r d T"</span> <span class="token punctuation">.</span> org-roam-dailies-capture-today<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">;; ui</span>
<span class="token punctuation">(</span><span class="token keyword">use-package</span> vertico
    <span class="token lisp-property property">:ensure</span> <span class="token boolean">t</span>
    <span class="token lisp-property property">:config</span>
    <span class="token punctuation">(</span><span class="token car">vertico-mode</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">use-package</span> orderless
    <span class="token lisp-property property">:ensure</span> <span class="token boolean">t</span>
    <span class="token lisp-property property">:init</span>
    <span class="token punctuation">(</span><span class="token keyword">setq</span> completion-styles <span class="token punctuation">'(</span><span class="token car">orderless</span> basic<span class="token punctuation">)</span>
        completion-category-defaults <span class="token boolean">nil</span>
        completion-category-overrides <span class="token punctuation">'(</span><span class="token punctuation">(</span><span class="token car">file</span> <span class="token punctuation">(</span><span class="token car">styles</span> partial-completion<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">;; 使用工具栏来做一些特定操作</span>
<span class="token punctuation">(</span><span class="token defun"><span class="token keyword">defun</span> <span class="token function">android-toggle-keyboard</span> <span class="token punctuation">(</span><span class="token arguments"></span><span class="token punctuation">)</span></span>
    <span class="token punctuation">(</span><span class="token interactive keyword">interactive</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token keyword">if</span> touch-screen-display-keyboard
        <span class="token punctuation">(</span><span class="token car">progn</span>
        <span class="token punctuation">(</span><span class="token keyword">setq</span> touch-screen-display-keyboard <span class="token boolean">nil</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token car">tool-bar-add-item</span>
            <span class="token string">"disconnect"</span> <span class="token quoted-symbol variable symbol">'android-toggle-keyboard</span>
            <span class="token quoted-symbol variable symbol">'android-toggle-keyboard</span>
            <span class="token lisp-property property">:help</span> <span class="token string">"Toggle keyboard"</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token keyword">message</span> <span class="token string">"Disable virtual keyboard"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token keyword">setq</span> touch-screen-display-keyboard <span class="token boolean">t</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token car">tool-bar-add-item</span>
        <span class="token string">"connect"</span> <span class="token quoted-symbol variable symbol">'android-toggle-keyboard</span>
        <span class="token quoted-symbol variable symbol">'android-toggle-keyboard</span>
        <span class="token lisp-property property">:help</span> <span class="token string">"Toggle keyboard"</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token keyword">message</span> <span class="token string">"Enable virtual keyboard"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token defun"><span class="token keyword">defun</span> <span class="token function">android-tool-bar-configs</span> <span class="token punctuation">(</span><span class="token arguments"></span><span class="token punctuation">)</span></span>
    <span class="token punctuation">(</span><span class="token keyword">when</span> <span class="token punctuation">(</span><span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token car">fboundp</span> <span class="token quoted-symbol variable symbol">'tool-bar-mode</span><span class="token punctuation">)</span>
                <span class="token punctuation">(</span><span class="token car">string-equal</span> system-type <span class="token string">"android"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token car">tool-bar-mode</span> <span class="token number">+1</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token keyword">setq</span> tool-bar-position <span class="token quoted-symbol variable symbol">'bottom</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token keyword">setq</span> tool-bar-button-margin <span class="token number">27</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token keyword">setq</span> tool-bar-map <span class="token punctuation">'(</span><span class="token car">keymap</span> <span class="token boolean">nil</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token car">android-general-tool-bar</span> <span class="token quoted-symbol variable symbol">'tool-bar-add-item</span> <span class="token boolean">nil</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token defun"><span class="token keyword">defun</span> <span class="token function">android-general-tool-bar</span> <span class="token punctuation">(</span><span class="token arguments"><span class="token argument variable">fun</span> <span class="token argument variable">map</span></span><span class="token punctuation">)</span></span>
    <span class="token punctuation">(</span><span class="token car">mapc</span> <span class="token punctuation">(</span><span class="token lambda"><span class="token keyword">lambda</span> <span class="token punctuation">(</span><span class="token arguments"><span class="token argument variable">args</span></span><span class="token punctuation">)</span></span>
            <span class="token punctuation">(</span><span class="token car">apply</span> fun args<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">`(</span><span class="token punctuation">(</span><span class="token string">"left-arrow"</span> tool-bar-item-left arrow-left <span class="token splice symbol variable">,map</span><span class="token punctuation">)</span>
            <span class="token punctuation">(</span><span class="token string">"right-arrow"</span> tool-bar-item-tab arrow-right <span class="token splice symbol variable">,map</span><span class="token punctuation">)</span>
            <span class="token punctuation">(</span><span class="token string">"info"</span> org-roam-dailies-capture-today org-roam-dailies-capture-today <span class="token splice symbol variable">,map</span><span class="token punctuation">)</span>
            <span class="token punctuation">(</span><span class="token string">"jump-to"</span> org-roam-dailies-goto-today org-roam-dailies-goto-today <span class="token splice symbol variable">,map</span><span class="token punctuation">)</span>
            <span class="token punctuation">(</span><span class="token string">"up-arrow"</span> delete-other-windows delete-other-windows <span class="token splice symbol variable">,map</span><span class="token punctuation">)</span>

            <span class="token punctuation">(</span><span class="token string">"connect"</span> android-toggle-keyboard android-toggle-keyboard <span class="token splice symbol variable">,map</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token car">define-key</span> key-translation-map <span class="token punctuation">(</span><span class="token car">kbd</span> <span class="token string">"&lt;XF86Back>"</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token car">kbd</span> <span class="token string">"C-g"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token car">define-key</span> key-translation-map <span class="token punctuation">(</span><span class="token car">kbd</span> <span class="token string">"&lt;volume-up>"</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token car">kbd</span> <span class="token string">"C-c"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token car">define-key</span> key-translation-map <span class="token punctuation">[</span>tool-bar arrow-left<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token car">kbd</span> <span class="token string">"M-x"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token car">define-key</span> key-translation-map <span class="token punctuation">[</span>tool-bar arrow-right<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token car">kbd</span> <span class="token string">"TAB"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">;; 在 org-capture 时动态改变工具栏的选项</span>
<span class="token punctuation">(</span><span class="token defvar"><span class="token keyword">defvar</span> <span class="token variable">capture-tool-bar-map</span></span>
    <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token car">map</span> <span class="token punctuation">(</span><span class="token car">make-sparse-keymap</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token car">tool-bar-local-item</span> <span class="token string">"checked"</span> <span class="token quoted-symbol variable symbol">#'org-capture-finalize</span> <span class="token quoted-symbol variable symbol">'capture-finalize</span> map<span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token car">tool-bar-local-item</span> <span class="token string">"close"</span> <span class="token quoted-symbol variable symbol">#'org-capture-kill</span> <span class="token quoted-symbol variable symbol">'capture-kill</span> map<span class="token punctuation">)</span>
    map<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token defun"><span class="token keyword">defun</span> <span class="token function">set-capture-tool-bar</span> <span class="token punctuation">(</span><span class="token arguments"></span><span class="token punctuation">)</span></span>
    <span class="token punctuation">(</span><span class="token car">setq-local</span> tool-bar-map capture-tool-bar-map<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token car">add-hook</span> <span class="token quoted-symbol variable symbol">'org-capture-mode-hook</span> <span class="token quoted-symbol variable symbol">#'set-capture-tool-bar</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token car">android-tool-bar-configs</span><span class="token punctuation">)</span>

<span class="token comment">;; 为安卓开启像素滚动</span>
<span class="token punctuation">(</span><span class="token keyword">setq</span> touch-screen-enable-hscroll <span class="token boolean">nil</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">setq</span> touch-screen-precision-scroll <span class="token boolean">t</span><span class="token punctuation">)</span>

<span class="token comment">;; theme</span>
<span class="token punctuation">(</span><span class="token keyword">use-package</span> ef-themes
    <span class="token lisp-property property">:ensure</span> <span class="token boolean">t</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token car">load-theme</span> <span class="token quoted-symbol variable symbol">'ef-winter</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>改得地方并不多，主要还是一些修改源添加一些常用包（vertico + orderlessv 真是谁用谁知道！）和用工具栏进行一些操作。说来也是感叹，在 PC 上大家都不怎么开的工具栏和菜单栏，在安卓这种很难接入键盘输入的场景下反而是重度依赖了起来。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul>
<li><a target="_blank" rel="noopener" href="https://gist.github.com/Jonny-exe/9bad76c3adc6e916434005755ea70389">syncthing setup exclusively with CLI · GitHub</a></li>
<li><a target="_blank" rel="noopener" href="https://computingforgeeks.com/how-to-install-and-use-syncthing-on-ubuntu/">Install and Use Syncthing on Ubuntu 22.04|20.04|18.04 | ComputingForGeeks</a></li>
<li><a target="_blank" rel="noopener" href="https://yuchen-lea.github.io/2024-02-04-android-emacs-with-doom-emacs/">在 Android Emacs 中使用 doom-emacs | 跬步</a> （是的，当然也可以在安卓上装 doom emacs 但不是很推荐，因为 doom emacs 大量使用调用子进程进行安装而安卓系统不是很支持这种「玩法」导致安装在网络流畅的情况下也可能耗时半小时之多，而且相关键位在没有键盘输入情况下也难以分配）</li>
<li><a target="_blank" rel="noopener" href="https://emacs-china.org/t/native-emacs-termux-emacs-emacs-everywhere/27135/23?u=southfox">用安卓native emacs+termux emacs，抛砖引玉说一下我体验emacs everywhere的个人指南 - #23，来自 DR MING</a></li>
</ul>
	  
	</div>

	<div>
  	<center>
	<div class="pagination">

    
    
    <a href="../../.././2025/02/2024-annual-review/" type="button" class="btn btn-default"><i
                class="fa fa-arrow-circle-o-left"></i> 上一页</a>
    

    <a href="../../.././" type="button" class="btn btn-default"><i class="fa fa-home"></i>主页</a>
    
    <a href="../../.././2023/12/2023年终总结/" type="button" class="btn btn-default ">下一页<i
                class="fa fa-arrow-circle-o-right"></i></a>
    

    
</div>

    </center>
	</div>
	
	<!-- comment -->
	
  
    <blockquote>如不想授权 Giscus 应用，也可以点击下方<strong>左上角数字</strong>直接跳转到 Github Discussions 进行评论。</blockquote>
    <script src="https://giscus.app/client.js"
            data-repo="SouthFox-D/SouthFox-D.github.io"
            data-repo-id="MDEwOlJlcG9zaXRvcnkyMjg3NDM0MjQ="
            data-category="博客评论"
            data-category-id="DIC_kwDODaJZAM4CA7bf"
            data-mapping="og:title"
            data-reactions-enabled="0"
            data-emit-metadata="0"
            data-input-position="top"
            data-theme="dark_dimmed"
            data-lang="zh-CN"
            crossorigin="anonymous"
            async>
    </script>
  


	</div> <!-- col-md-9/col-md-12 -->
		
	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2024-12-31 
	</div>
	

	<!-- categories -->
    
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i></a>	
    <ul id="categorys" class="tag_box list-unstyled collapse in">
          
  <li>
    <li><a href="/categories/技术/">技术<span>19</span></a></li>
  </li>

    </ul>
	</div>
	

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>		  
    <ul id="tags" class="tag_box list-unstyled collapse in">	  
	    
  <li><a href="/tags/技术/">技术<span>12</span></a></li> <li><a href="/tags/Emacs/">Emacs<span>7</span></a></li>
    </ul>
	</div>
		

	<!-- toc -->
	<div class="meta-widget">
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

	</div>
		

</div><!-- row -->

	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2025 SouthFox
  
      Font by <a href="https://github.com/SolidZORO/zpix-pixel-font" target="_blank">Zpix</a>,
     Theme by <a href="https://github.com/blackshow/hexo-theme-freemind.386" target="_blank">Freemind.386</a>.  <br> <a href="../../.././Privacy-Policy" target="_blank">隐私政策</a>
</p>
 </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>⬆︎TOP</span>
</a>

<script src="../../.././js/jquery.imagesloaded.min.js"></script>
<!-- <script src="../../.././js/gallery.js"></script> -->
<script src="../../.././js/bootstrap.min.js"></script>
<script src="../../.././js/main.js"></script>
<script src="../../.././js/search.js"></script>




</body>
   </html>
